<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Language Settings</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Bootstrap (layout utilities) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font Awesome Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />

  <!-- Project styles (same as the rest of your pages) -->
  <link rel="stylesheet" href="./styles.css" />

  <style>
    /* Small fallback so the page stays clean even if styles.css isn't loaded in a standalone preview */
    :root { color-scheme: dark; }
    body { background:#0b0c0f; color:#e9ecf2; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    .lux-page { min-height: 100dvh; padding-bottom: 24px; }
    .lux-topbar {
      position: sticky; top: 0; z-index: 10;
      padding: 14px 12px; padding-top: calc(14px + env(safe-area-inset-top));
      background: rgba(11,12,15,.82);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .lux-topbar .btn-ic {
      width: 44px; height: 44px; border-radius: 14px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.06);
      display: inline-flex; align-items:center; justify-content:center;
      color: #fff;
    }
    .lux-title { font-weight: 700; font-size: 1.05rem; letter-spacing: .2px; margin:0; }
    .lux-sub { margin: 2px 0 0; opacity:.75; font-size:.88rem; }
    .lux-card {
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.05);
      border-radius: 18px;
      box-shadow: 0 12px 30px rgba(0,0,0,.35);
    }
    .lux-input {
      width: 100%;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.22);
      color: #fff;
      padding: 12px 14px;
      outline: none;
    }
    .lux-row {
      display:flex; align-items:center; gap:12px;
      padding: 12px 14px;
      border-top: 1px solid rgba(255,255,255,.06);
      cursor: pointer;
    }
    .lux-row:first-child { border-top: 0; }
    .lux-flag {
      width: 34px; height: 34px; border-radius: 12px;
      display:flex; align-items:center; justify-content:center;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      flex: 0 0 auto;
    }
    .lux-row .tx { flex:1; min-width: 0; }
    .lux-row .name { font-weight: 600; margin:0; line-height: 1.2; }
    .lux-row .meta { margin: 2px 0 0; opacity:.7; font-size:.85rem; }
    .lux-check { opacity: 0; transition: opacity .15s ease; }
    .lux-row.selected .lux-check { opacity: 1; }
    .lux-btn {
      width: 100%;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.10);
      padding: 12px 14px;
      color: #fff;
      font-weight: 700;
    }
    .lux-note { opacity:.7; font-size:.86rem; }
  </style>
</head>

<body class="lux-body">
  <div class="lux-page">
    <header class="lux-topbar">
      <div class="container px-2">
        <div class="d-flex align-items-center gap-2">
          <button class="btn-ic" id="backBtn" type="button" aria-label="Back">
            <i class="fa-solid fa-arrow-left"></i>
          </button>
          <div class="flex-grow-1">
            <h1 class="lux-title">Language Settings</h1>
            <p class="lux-sub">Choose your preferred language</p>
          </div>
        </div>

        <div class="mt-3 lux-card p-2">
          <div class="px-2 py-2">
            <div class="d-flex align-items-center gap-2">
              <span class="lux-flag" aria-hidden="true"><i class="fa-solid fa-magnifying-glass"></i></span>
              <input class="lux-input" id="langSearch" type="search" placeholder="Search language…" autocomplete="off" />
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="container px-3 mt-3">
      <section class="lux-card" aria-label="Languages">
        <div id="langList"></div>
      </section>

      <div class="mt-3 lux-note">
        Tip: You can change language anytime from Settings.
      </div>

      <div class="mt-3">
        <button class="lux-btn" id="saveBtn" type="button">
          <i class="fa-solid fa-floppy-disk me-2"></i>Save
        </button>
      </div>
    </main>
  </div>

  <script>
    (function(){
      const LANG_KEY = 'lux_language';
      const $ = (s, el=document) => el.querySelector(s);

      const languages = [
        { code:'ar', name:'Arabic', native:'العربية', icon:'fa-globe' },
        { code:'en', name:'English', native:'English', icon:'fa-language' },
        { code:'fr', name:'French', native:'Français', icon:'fa-language' },
        { code:'es', name:'Spanish', native:'Español', icon:'fa-language' },
        { code:'de', name:'German', native:'Deutsch', icon:'fa-language' },
        { code:'it', name:'Italian', native:'Italiano', icon:'fa-language' },
        { code:'pt', name:'Portuguese', native:'Português', icon:'fa-language' },
        { code:'ru', name:'Russian', native:'Русский', icon:'fa-language' },
        { code:'tr', name:'Turkish', native:'Türkçe', icon:'fa-language' },
        { code:'fa', name:'Persian', native:'فارسی', icon:'fa-language' },
        { code:'ur', name:'Urdu', native:'اردو', icon:'fa-language' },
        { code:'hi', name:'Hindi', native:'हिन्दी', icon:'fa-language' },
        { code:'bn', name:'Bengali', native:'বাংলা', icon:'fa-language' },
        { code:'id', name:'Indonesian', native:'Bahasa Indonesia', icon:'fa-language' },
        { code:'ms', name:'Malay', native:'Bahasa Melayu', icon:'fa-language' },
        { code:'vi', name:'Vietnamese', native:'Tiếng Việt', icon:'fa-language' },
        { code:'th', name:'Thai', native:'ไทย', icon:'fa-language' },
        { code:'zh', name:'Chinese (Simplified)', native:'简体中文', icon:'fa-language' },
        { code:'ja', name:'Japanese', native:'日本語', icon:'fa-language' },
        { code:'ko', name:'Korean', native:'한국어', icon:'fa-language' },
        { code:'nl', name:'Dutch', native:'Nederlands', icon:'fa-language' },
        { code:'sv', name:'Swedish', native:'Svenska', icon:'fa-language' },
        { code:'pl', name:'Polish', native:'Polski', icon:'fa-language' },
        { code:'uk', name:'Ukrainian', native:'Українська', icon:'fa-language' }
      ];

      const listEl = $('#langList');
      const searchEl = $('#langSearch');
      const saveBtn = $('#saveBtn');
      const backBtn = $('#backBtn');

      let selected = String(localStorage.getItem(LANG_KEY) || 'ar');

      function render(filterText=''){
        const q = filterText.trim().toLowerCase();
        listEl.innerHTML = '';
        const items = languages.filter(l => {
          if(!q) return true;
          return (l.name + ' ' + l.native + ' ' + l.code).toLowerCase().includes(q);
        });

        items.forEach(l => {
          const row = document.createElement('div');
          row.className = 'lux-row' + (l.code === selected ? ' selected' : '');
          row.setAttribute('role','button');
          row.setAttribute('tabindex','0');
          row.dataset.code = l.code;

          row.innerHTML = `
            <div class="lux-flag" aria-hidden="true"><i class="fa-solid ${l.icon}"></i></div>
            <div class="tx">
              <p class="name">${l.name}</p>
              <p class="meta">${l.native} • ${l.code.toUpperCase()}</p>
            </div>
            <div class="lux-check" aria-hidden="true"><i class="fa-solid fa-circle-check"></i></div>
          `;

          function pick(){
            selected = l.code;
            [...listEl.children].forEach(ch => ch.classList.remove('selected'));
            row.classList.add('selected');
          }
          row.addEventListener('click', pick);
          row.addEventListener('keydown', (e) => {
            if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); pick(); }
          });

          listEl.appendChild(row);
        });

        if(items.length === 0){
          const empty = document.createElement('div');
          empty.className = 'p-3';
          empty.style.opacity = '.75';
          empty.textContent = 'No languages found.';
          listEl.appendChild(empty);
        }
      }

      searchEl.addEventListener('input', () => render(searchEl.value));

      saveBtn.addEventListener('click', () => {
        localStorage.setItem(LANG_KEY, selected);
        saveBtn.innerHTML = '<i class="fa-solid fa-check me-2"></i>Saved';
        setTimeout(() => {
          saveBtn.innerHTML = '<i class="fa-solid fa-floppy-disk me-2"></i>Save';
        }, 900);
      });

      backBtn.addEventListener('click', () => {
        if(history.length > 1) history.back();
        else window.location.href = './index000.html';
      });

      render('');
    })();
  </script>
</body>
</html>
